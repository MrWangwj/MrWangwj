---
title: Mysql 高效的存储IPv4地址 inet_aton   inet_ntoa
date: 2018-03-01 15:10:33
categories: mysql
tags:
- 优化存储
---
> IPv4的地址人们通常使用的是varchar(15)列来存储IP地址。mysql可以使用无符号整数来存储，myql提供`inet_aton()`和`inet_ntoa()`来互相转换。

使用 `inet_aton()` 存储IP地址可以使用无符号的`int` 就可以存储了。
```
//创建数据库
create table a(ip int unsigned);
```
<!-- more -->

![这里写图片描述](http://img.blog.csdn.net/20180301145758698?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXJ3YW5nd2Vpamlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

使用 `inet_aton`向数据库中添加ip地址
```
insert into a values(inet_aton('255.255.255.255')), (inet_aton('192.168.1.1'));
```

![这里写图片描述](http://img.blog.csdn.net/20180301150136405?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXJ3YW5nd2Vpamlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

查询数据
```
select * from a where ip=inet_aton('192.168.1.1');
```
![这里写图片描述](http://img.blog.csdn.net/20180301150503516?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXJ3YW5nd2Vpamlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

使用 `inet_aton()` 来显示数据
```
select inet_ntoa(ip) from a;
``` 
![这里写图片描述](http://img.blog.csdn.net/2018030115070916?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXJ3YW5nd2Vpamlu/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

使用int来存储ip可以加快通过ip查找的速度。